{% extends 'dados/base.html' %} 
{% load crispy_forms_tags %} 
{% block conteudo %}
{% load static %}
{% load widget_tweaks %}

<!--  Irar mostrar informações apenas se usuario estiver logado-->

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">


<h1>Listagem de Esgoto</h1>

<div class="container-fluid" >
  
  <!--  Menu de filtros e gerar novo item-->
  <div>
    <form method="get">
      {% csrf_token %}
      <button type="button" class="btn btn-outline-success btn-sm" data-toggle="modal" data-target="#cadesgoto"><i class="fa fa-plus" aria-hidden="true"></i>Adicionar</button>

      <div class="form-inline col-md-1 mb-0" style="float: right">⠀<button type="submit" class="btn btn-primary mb-2" style="margin-top: 20px">Filtrar</button></div>

        <select id="days" name="days">
          <option value="7">Últimos 7 dias</option>
          <option value="30">Últimos 30 dias</option>
          <option value="60">Últimos 60 dias</option>
          <option value="90">Últimos 90 dias</option>
          <option value="120">Últimos 120 dias</option>
        </select>  

        <select id="execut" name="execut">
          <option value="">Filtrar Situação</option>
          <option value="all">All</option>
          <option value=False>Pendente</option>
          <option value=True>Executado</option>
        </select>  

        <select id="serv" name="serv">
          <option value="">Filtrar Serviço</option>
          <option value="all">All</option>
          <option value="Vedacao">Vedação</option>
          <option value="Conserto">Conserto</option>
          <option value="Desobstrucao">Deesobstrução</option>
        </select> 

          {% comment %} {% if user.groups.all.0.name == "Lauro" %}
            <select id="bairro" name="bairro">
              <option value="">Filtrar Bairro</option>
                  <option value="all">All</option>
                  <option value="1 - Ipitinga">1 - Ipitinga</option>
                  <option value="2 - Vilas Atlantico">2 - Vilas Atlantico</option>
                  <option value="3 - Caji">3 - Caji</option>
                  <option value="4 - Areia Branca">4 - Areia Branca</option>
                  <option value="5 - Portao">5 - Portao</option>
                  <option value="6 - Vila Praiana">6 - Vila Praiana</option>
                  <option value="7 - Aracui">7 - Aracui</option>
                  <option value="8 - Jockey Clube">8 - Jockey Clube</option>
                  <option value="9 - Pitangueiras">9 - Pitangueiras</option>
                  <option value="10 - Centro">10 - Centro</option>
                  <option value="11 - Buraquinho">11 - Buraquinho</option>
                  <option value="13 - Itinga">13 - Itinga</option>
                  <option value="14 - Sao Cristovao">14 - Sao Cristovao</option>
                  <option value="15 - Cassange">15 - Cassange</option>
                  <option value="16 - Est do Coco">16 - Est do Coco</option>
                  <option value="17 - Jd Aeroporto">17 - Jd Aeroporto</option>
                  <option value="18 - Pa do Flamengo">18 - Pa do Flamengo</option>
                  <option value="19 - Jambeiro">19 - Jambeiro</option>
                  <option value="20 - Capelao SSA">20 - Capelao SSA</option>
                  <option value="21 - Lote Miragem">21 - Lote Miragem</option>
                  <option value="23 - Itinga SSA">23 - Itinga SSA</option>
                  <option value="24 - Ipitinga SSA">24 - Ipitinga SSA</option>
                  <option value="25 - Areia Branca SSA">25 - Areia Branca SSA</option>
                  <option value="26 - Cassange SSA">26 - Cassange SSA</option>
                  <option value="27 - Stella Maris SSA">27 - Stella Maris SSA</option>
                  <option value="28 - Aeroporto">28 - Aeroporto</option>
                  <option value="29 - Jd Castelao">29 - Jd Castelao</option>
                  <option value="31 - Quingoma">31 - Quingoma</option>
                  <option value="33 - Jd dos Passaros">33 - Jd dos Passaros</option>
                  <option value="34 - Cia Mar SSA">34 - Cia Mar SSA</option>
                  <option value="35 - Recrei Ipitinga">35 - Recrei Ipitinga</option>
                  <option value="36 - Caixa Dagua">36 - Caixa Dagua</option>
                  <option value="37 - Vida Nova">37 - Vida Nova</option>
                  <option value="38 - Capelao">38 - Capelao</option>
                  <option value="39 - Pq Sao Paulo">39 - Pq Sao Paulo</option>
            </select>
          {% elif user.groups.all.0.name == 'Salvador'%}
            <select id="bairro" name="bairro">
                <option value="">Filtrar Bairro</option>
                <option value="all">All</option>
                    <option value="13 - Rio Vermelho">13 - Rio Vermelho</option>
                    <option value="14 - Amaralina">14 - Amaralina</option>
                    <option value="15 - Pituba">15 - Pituba</option>
                    <option value="16 - Boca do Rio">16 - Boca do Rio</option>
                    <option value="17 - Piata">17 - Piata</option>
                    <option value="18 - Itapua">18 - Itapua</option>
                    <option value="22 - Jd Margaridas">22 - Jd Margaridas</option>
                    <option value="29 - Pernambues">29 - Pernambues</option>
                    <option value="50 - CAB">50 - CAB</option>
                    <option value="52 - Cam das Arvores">52 - Cam das Arvores</option>
                    <option value="53 - Itaigara">53 - Itaigara</option>
                    <option value="54 - Stiep">54 - Stiep</option>
                    <option value="64 - Sao Cristovao">64 - Sao Cristovao</option>
                    <option value="105 - Nordt Amaralina">105 - Nordt Amaralina</option>
                    <option value="113 - Patamares">113 - Patamares</option>
                    <option value="115 - Imbui">115 - Imbui</option>
                    <option value="116 - Costa Azul">116 - Costa Azul</option>
                    <option value="117 - Stella Maris">117 - Stella Maris</option>
                    <option value="118 - Jardim Armacao">118 - Jardim Armacao</option>
                    <option value="119 - Mussurunga">119 - Mussurunga</option>
                    <option value="139 - Trobogy">139 - Trobogy</option>
                    <option value="140 - Paralela">140 - Paralela</option>
                    <option value="141 - Pituaçu">141 - Pituaçu</option>
                    <option value="145 - Alt Coqueirinho">145 - Alt Coqueirinho</option>
                    <option value="149 - Aeroporto">149 - Aeroporto</option>
                    <option value="183 - Narandiba">183 - Narandiba</option>
                    <option value="186 - Pa do Flamengo">186 - Pa do Flamengo</option>
                    <option value="191 - Bairro da Paz">191 - Bairro da Paz</option>
                    <option value="193 - N Brasilia Itap">193 - N Brasilia Itap</option>
                    <option value="204 - Faz Grande IV">204 - Faz Grande IV</option>
                    <option value="233 - Cassange">233 - Cassange</option>
                    <option value="238 - Itinga">238 - Itinga</option>
                    <option value="242 - Mussurunga">242 - Mussurunga</option>
                    <option value="243 - Sao Cristovao">243 - Sao Cristovao</option>
                    <option value="246 - Cassange">246 - Cassange</option>
                    <option value="238 - Itinga">238 - Itinga</option>
                    <option value="242 - Mussurunga">242 - Mussurunga</option>
                    <option value="243 - Sao Cristovao">243 - Sao Cristovao</option>
                    <option value="246 - Cassange">246 - Cassange</option>
                    <option value="301 - Areia Branca">301 - Areia Branca</option>
                    <option value="304 - Saboeiro">304 - Saboeiro</option>
                    <option value="305 - Sao Rafael">305 - Sao Rafael</option>
                    <option value="306 - Vale dos Lagos">306 - Vale dos Lagos</option>
                    <option value="307 - Canabrava">307 - Canabrava</option>
            </select>
          {% else %}
            <select id="bairro" name="bairro">
              <option value="">Filtrar Bairro</option>
                  <option value="all">All</option>
                  <option value="1 - Ipitinga">1 - Ipitinga</option>
                  <option value="2 - Vilas Atlantico">2 - Vilas Atlantico</option>
                  <option value="3 - Caji">3 - Caji</option>
                  <option value="4 - Areia Branca">4 - Areia Branca</option>
                  <option value="5 - Portao">5 - Portao</option>
                  <option value="6 - Vila Praiana">6 - Vila Praiana</option>
                  <option value="7 - Aracui">7 - Aracui</option>
                  <option value="8 - Jockey Clube">8 - Jockey Clube</option>
                  <option value="9 - Pitangueiras">9 - Pitangueiras</option>
                  <option value="10 - Centro">10 - Centro</option>
                  <option value="11 - Buraquinho">11 - Buraquinho</option>
                  <option value="13 - Itinga">13 - Itinga</option>
                  <option value="14 - Sao Cristovao">14 - Sao Cristovao</option>
                  <option value="15 - Cassange">15 - Cassange</option>
                  <option value="16 - Est do Coco">16 - Est do Coco</option>
                  <option value="17 - Jd Aeroporto">17 - Jd Aeroporto</option>
                  <option value="18 - Pa do Flamengo">18 - Pa do Flamengo</option>
                  <option value="19 - Jambeiro">19 - Jambeiro</option>
                  <option value="20 - Capelao SSA">20 - Capelao SSA</option>
                  <option value="21 - Lote Miragem">21 - Lote Miragem</option>
                  <option value="23 - Itinga SSA">23 - Itinga SSA</option>
                  <option value="24 - Ipitinga SSA">24 - Ipitinga SSA</option>
                  <option value="25 - Areia Branca SSA">25 - Areia Branca SSA</option>
                  <option value="26 - Cassange SSA">26 - Cassange SSA</option>
                  <option value="27 - Stella Maris SSA">27 - Stella Maris SSA</option>
                  <option value="28 - Aeroporto">28 - Aeroporto</option>
                  <option value="29 - Jd Castelao">29 - Jd Castelao</option>
                  <option value="31 - Quingoma">31 - Quingoma</option>
                  <option value="33 - Jd dos Passaros">33 - Jd dos Passaros</option>
                  <option value="34 - Cia Mar SSA">34 - Cia Mar SSA</option>
                  <option value="35 - Recrei Ipitinga">35 - Recrei Ipitinga</option>
                  <option value="36 - Caixa Dagua">36 - Caixa Dagua</option>
                  <option value="37 - Vida Nova">37 - Vida Nova</option>
                  <option value="38 - Capelao">38 - Capelao</option>
                  <option value="39 - Pq Sao Paulo">39 - Pq Sao Paulo</option>
                  <option value="13 - Rio Vermelho">13 - Rio Vermelho</option>
                  <option value="14 - Amaralina">14 - Amaralina</option>
                  <option value="15 - Pituba">15 - Pituba</option>
                  <option value="16 - Boca do Rio">16 - Boca do Rio</option>
                  <option value="17 - Piata">17 - Piata</option>
                  <option value="18 - Itapua">18 - Itapua</option>
                  <option value="22 - Jd Margaridas">22 - Jd Margaridas</option>
                  <option value="29 - Pernambues">29 - Pernambues</option>
                  <option value="50 - CAB">50 - CAB</option>
                  <option value="52 - Cam das Arvores">52 - Cam das Arvores</option>
                  <option value="53 - Itaigara">53 - Itaigara</option>
                  <option value="54 - Stiep">54 - Stiep</option>
                  <option value="64 - Sao Cristovao">64 - Sao Cristovao</option>
                  <option value="105 - Nordt Amaralina">105 - Nordt Amaralina</option>
                  <option value="113 - Patamares">113 - Patamares</option>
                  <option value="115 - Imbui">115 - Imbui</option>
                  <option value="116 - Costa Azul">116 - Costa Azul</option>
                  <option value="117 - Stella Maris">117 - Stella Maris</option>
                  <option value="118 - Jardim Armacao">118 - Jardim Armacao</option>
                  <option value="119 - Mussurunga">119 - Mussurunga</option>
                  <option value="139 - Trobogy">139 - Trobogy</option>
                  <option value="140 - Paralela">140 - Paralela</option>
                  <option value="141 - Pituaçu">141 - Pituaçu</option>
                  <option value="145 - Alt Coqueirinho">145 - Alt Coqueirinho</option>
                  <option value="149 - Aeroporto">149 - Aeroporto</option>
                  <option value="183 - Narandiba">183 - Narandiba</option>
                  <option value="186 - Pa do Flamengo">186 - Pa do Flamengo</option>
                  <option value="191 - Bairro da Paz">191 - Bairro da Paz</option>
                  <option value="193 - N Brasilia Itap">193 - N Brasilia Itap</option>
                  <option value="204 - Faz Grande IV">204 - Faz Grande IV</option>
                  <option value="233 - Cassange">233 - Cassange</option>
                  <option value="238 - Itinga">238 - Itinga</option>
                  <option value="242 - Mussurunga">242 - Mussurunga</option>
                  <option value="243 - Sao Cristovao">243 - Sao Cristovao</option>
                  <option value="246 - Cassange">246 - Cassange</option>
                  <option value="238 - Itinga">238 - Itinga</option>
                  <option value="242 - Mussurunga">242 - Mussurunga</option>
                  <option value="243 - Sao Cristovao">243 - Sao Cristovao</option>
                  <option value="246 - Cassange">246 - Cassange</option>
                  <option value="301 - Areia Branca">301 - Areia Branca</option>
                  <option value="304 - Saboeiro">304 - Saboeiro</option>
                  <option value="305 - Sao Rafael">305 - Sao Rafael</option>
                  <option value="306 - Vale dos Lagos">306 - Vale dos Lagos</option>
                  <option value="307 - Canabrava">307 - Canabrava</option>
            </select>
          {% endif %} {% endcomment %}

          
        <select id="bairro" name="bairro">
          <option value="">Filtrar Bairro</option>
              <option value="all">All</option>
              <option value="">Selecione uma equipe</option>
                <option value="Ipitinga">Ipitinga</option>
                <option value="Vilas Atlantico">Vilas Atlantico</option>
                <option value="Caji">Caji</option>
                <option value="Areia Branca">Areia Branca</option>
                <option value="Portao">Portao</option>
                <option value="Vila Praiana">Vila Praiana</option>
                <option value="Aracui">Aracui</option>
                <option value="Jockey Clube">Jockey Clube</option>
                <option value="Pitangueiras">Pitangueiras</option>
                <option value="Centro">Centro</option>
                <option value="Buraquinho">Buraquinho</option>
                <option value="Itinga">Itinga</option>
                <option value="Sao Cristovao">Sao Cristovao</option>
                <option value="Cassange">Cassange</option>
                <option value="Est do Coco">Est do Coco</option>
                <option value="Jd Aeroporto">Jd Aeroporto</option>
                <option value="Pa do Flamengo">Pa do Flamengo</option>
                <option value="Jambeiro">Jambeiro</option>
                <option value="Capelao SSA">Capelao SSA</option>
                <option value="Lote Miragem">Lote Miragem</option>
                <option value="Itinga SSA">Itinga SSA</option>
                <option value="Ipitinga SSA">Ipitinga SSA</option>
                <option value="Areia Branca SSA">Areia Branca SSA</option>
                <option value="Cassange SSA">Cassange SSA</option>
                <option value="Stella Maris SSA">Stella Maris SSA</option>
                <option value="Aeroporto">Aeroporto</option>
                <option value="Jd Castelao">Jd Castelao</option>
                <option value="Quingoma">Quingoma</option>
                <option value="Jd dos Passaros">Jd dos Passaros</option>
                <option value="Cia Mar SSA">Cia Mar SSA</option>
                <option value="Recrei Ipitinga">Recrei Ipitinga</option>
                <option value="Caixa Dagua">Caixa Dagua</option>
                <option value="Vida Nova">Vida Nova</option>
                <option value="Capelao">Capelao</option>
                <option value="Pq Sao Paulo">Pq Sao Paulo</option>
                <option value="Rio Vermelho">Rio Vermelho</option>
                <option value="Amaralina">Amaralina</option>
                <option value="Pituba">Pituba</option>
                <option value="Boca do Rio">Boca do Rio</option>
                <option value="Piata">Piata</option>
                <option value="Itapua">Itapua</option>
                <option value="Jd Margaridas">Jd Margaridas</option>
                <option value="Pernambues">Pernambues</option>
                <option value="CAB">CAB</option>
                <option value="Cam das Arvores">Cam das Arvores</option>
                <option value="Itaigara">Itaigara</option>
                <option value="Stiep">Stiep</option>
                <option value="Nordt Amaralina">Nordt Amaralina</option>
                <option value="Patamares">Patamares</option>
                <option value="Imbui">Imbui</option>
                <option value="Costa Azul">Costa Azul</option>
                <option value="Stella Maris">Stella Maris</option>
                <option value="Jardim Armacao">Jardim Armacao</option>
                <option value="Mussurunga">Mussurunga</option>
                <option value="Trobogy">Trobogy</option>
                <option value="Paralela">Paralela</option>
                <option value="Pituaçu">Pituaçu</option>
                <option value="Alt Coqueirinho">Alt Coqueirinho</option>
                <option value="Aeroporto">Aeroporto</option>
                <option value="Narandiba">Narandiba</option>
                <option value="Pa do Flamengo">Pa do Flamengo</option>
                <option value="Bairro da Paz">Bairro da Paz</option>
                <option value="N Brasilia Itap">N Brasilia Itap</option>
                <option value="Faz Grande IV">Faz Grande IV</option>
                <option value="Cassange">Cassange</option>
                <option value="Itinga">Itinga</option>
                <option value="Mussurunga">Mussurunga</option>
                <option value="Sao Cristovao">Sao Cristovao</option>
                <option value="Cassange">Cassange</option>
                <option value="Areia Branca">Areia Branca</option>
                <option value="Saboeiro">Saboeiro</option>
                <option value="Sao Rafael">Sao Rafael</option>
                <option value="Vale dos Lagos">Vale dos Lagos</option>
                <option value="Canabrava">Canabrava</option>
        </select>
  
    </form>
  </div>

  <!-- Modal Pendencias de Esgoto-->
  <div class="modal fade bd-example-modal-lg" id="cadesgoto" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content row">

        <div class="modal-header">
          <h3 class="modal-title" id="exampleModalLabel">Cadastro Pendencias de Esgoto</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
     

        <div class="container">
          <div class="card-body">
            <form action="" method="POST">
              {% csrf_token %}

              <div id="penesgo">

                <div class="input-group mb-3">
                  <span class="input-group-text">Ss</span>
                  {% render_field esgoto01.Ss class="form-control" placeholder="Informe 9 Digitos" minlength="9" maxlength="9"%}
                  ⠀
                  <span class="input-group-text">Data</span>
                  {% render_field esgoto01.Data class="form-control"%}
                </div>

                <div class="input-group mb-3">
                    <span id='id_Equipe' class="input-group-text">Equipe</span>
                    {% render_field esgoto01.EquipeGestor  class="form-control" %}
                    ⠀
                    <span class="input-group-text">Bairro</span>
                    {% render_field esgoto01.BairroGestor class="form-control"%}
                </div>

                <div class="input-group mb-3">
                  <span class="input-group-text">Rua</span>
                  {% render_field esgoto01.Rua class="form-control" placeholder=" item obrigatorio" %} 
                  ⠀
                  <span class="input-group-text">Referencia</span>
                  {% render_field esgoto01.Referencia class="form-control" placeholder=" item obrigatorio"%}
                </div>

                <div class="input-group mb-3">
                  <span class="input-group-text">Servico</span>
                  {% render_field esgoto01.Servico class="form-control" %}
                   ⠀
                  <span  class="input-group-text">Obs</span>
                  {% render_field esgoto01.Observacao class="form-control" placeholder=" item obrigatorio"%}
                </div>
              
                <div class="input-group mb-3">
                  <span class="input-group-text">Servico</span>
                    {% render_field esgoto01.Executado class="form-control"%}
                  ⠀
                  <span class="input-group-text">Situação</span>
                  {% render_field esgoto01.Medir class='form-control'%}
                </div>
                
                <div class="input-group mb-3">
                  <span class="input-group-text">Localidade</span>
                  {% render_field esgoto01.Localidade class='form-control' %}
                  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
                </div>
              </div>

              <div id="btnesg">
                <button class="btn btn-secondary">
                  <a style="color: white" href="{% url 'pavimentos2'%}" class="text-decoration-none"><i class="fa fa-reply" aria-hidden="true"></i> Voltar</a>
                </button>
                <button class="btn btn-success" type="submit"><i class="fa fa-check" aria-hidden="true"></i>
                  Salvar
                </button>
              </div>
              
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="form-control" style="font-size: 12px">
    {% if user.groups.all.0.name == 'Lauro' %}
    <h8> <i class="fas fa-table me-1"></i>{{cont_pav_lf2}} registro(s) encontrado(s) - {{qtdlf2}} Pendente(s)</h8>

    {% elif user.groups.all.0.name == 'Salvador' %}
    <h8> <i class="fas fa-table me-1"></i>{{cont_pav_ssa}} registro(s) encontrado(s) - {{qtdssa2}} Pendente(s)</h8>

    {% else %}
    <h8> <i class="fas fa-table me-1"></i>{{cont_pav3}} registro(s) encontrado(s) - {{qtd3}} Pendente(s)</h8>

    {% endif %}
  </div>

  <table style="width: 100%" class="table table-striped table-bordered table-hover table-responsive" id="tabela-listar">
    <thead>
      <tr>
        <th></th>
        <th>Localidade</th>
        <th>Situação</th>
        <th>Ss</th>
        <th>Data</th>
        <th>Prazo</th>
        <th>Equipe</th>
        <th>Bairro</th>
        <th>Rua</th>
        <th>Referencia</th>
        <th>Serviço</th>
        <th>Observações</th>

        <th>Editar</th>
        <th>Copiar</th>
        <th>Executado</th>
        <th>Criou</th>
        <th>Editou</th>
        {% comment %} <th>Detalhes</th>
        <th>Excluir</th> {% endcomment %}
      </tr>
    </thead>
    <!-- for para iterar sobre todos os itens do banco de dados -->
    <tbody>
      <!-- Query para o Grupo de Lauro -->
      {% if user.groups.all.0.name == 'Lauro' %}
        {% for dado in localidade_l.qs %}
          <tr>
            <td></td>
            <td>{{dado.Localidade}}</td>
            <td>
              {% if dado.Medir == 'Medir' %}
                <h2 style="color: Green">P/ Medir</h2>
              {% elif dado.Medir == 'Prioridade' %}
                <h2 style="color: red">Priorizar!</h2>
              {% else %}
                <h2 style="color: Grey">Normal</h2>
              {% endif %}
            </td>
            <td>{{dado.Ss}}</td>
            <td>{{dado.Data|date:"d/m/Y"}}</td>

            {% if dado.atual3 %}
              <td>
                {{dado.atual4}}
                <i class="fas fa-calendar-check fa-lg"></i>
              </td>
            {% else %}
              <td>
                {{dado.atual4}}
                <i class="fas fa-calendar-plus fa-lg"></i>
              </td>
            {% endif %}


            <td>{{dado.EquipeGestor|lower|capfirst}}</td>
            <td>{{dado.BairroGestor|lower|capfirst}}</td>
            <td>{{dado.Rua|lower|capfirst}}</td>
            <td>{{dado.Referencia|lower|capfirst}}</td>
            <td>{{dado.Servico|lower|capfirst}}</td>
            <td>{{dado.Observacao|lower|capfirst}}</td>

            <td>
              <a href="{% url 'editar2' dado.id %}">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </a>
            </td>

            <!--  Filtro Copiar informaçoes da tabela-->
            {% if dado.Copiar %}
            <td></td>
            {% else %}
            <td>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
              <a class="btn" data-clipboard-text="  Executar: {{dado.Servico|capfirst}} inf {{dado.Equipe|capfirst}}">
                <i class="fa fa-clipboard" aria-hidden="true"></i>
              </a>
            </td>
              <script>
                const clipboard = new ClipboardJS(".btn");
                clipboard.on("success", function (e) {});

                clipboard.on("error", function (e) {});
              </script>
            {% endif %}

            <!--  Filtro checked-->
            {% if dado.Executado %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" checked />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% else %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% endif %}
            <td>{{dado.created_by}}</td>
            <td>{{dado.last_edited_by}}</td>

            <!--  Filtro Detalhes-->
            {% comment %} <td>
              <a id="teste1" font size="2" class="text-decoration-none" href="{% url 'detalhe2' dado.id%}"> <img src="https://img.icons8.com/dusk/64/000000/redo.png" height="25" width="25" /></a>
            </td>

            <td>
              <a href="{% url 'excluir2' dado.id %}"> <img src="https://img.icons8.com/dusk/64/000000/delete-forever.png" height="25" width="25" /></a>
            </td> {% endcomment %}
          </tr>
        {% endfor %}

        <!-- Query para o Grupo de Salvador -->
      {% elif user.groups.all.0.name == 'Salvador'%}
        {% for dado in localidade_2.qs %}
          <tr>
            <td></td>
            <td>{{dado.Localidade}}</td>
            <td>
              {% if dado.Medir == 'Medir' %}
                <h2 style="color: Green">P/ Medir</h2>
              {% elif dado.Medir == 'Prioridade' %}
                <h2 style="color: red">Priorizar!</h2>
              {% else %}
                <h2 style="color: Grey">Normal</h2>
              {% endif %}
            </td>
            <td>{{dado.Ss}}</td>
            <td>{{dado.Data|date:"d/m/Y"}}</td>

            
            <td>
              {% if dado.atual3 %}
                {{ dado.atual3|safe }} 
                <i class="fas fa-calendar-plus fa-lg"></i>
              {% else %}
              <i class="fas fa-calendar-check fa-lg"></i>
              {% endif %}
            </td>

      
            <td>{{dado.EquipeGestor|lower|capfirst}}</td>
            <td>{{dado.BairroGestor|lower|capfirst}}</td>
            <td>{{dado.Rua|lower|capfirst}}</td>
            <td>{{dado.Referencia|lower|capfirst}}</td>
            <td>{{dado.Servico|lower|capfirst}}</td>
            <td>{{dado.Observacao|lower|capfirst}}</td>

            <td>
              <a href="{% url 'editar2' dado.id %}">
                <i class="fa fa-pencil fa-lg" aria-hidden="true"></i>
              </a>
            </td>

            <!--  Filtro Copiar informaçoes da tabela-->
            {% if dado.Copiar %}
            <td></td>
            {% else %}
            <td>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
              <a class="btn" data-clipboard-text="  Executar: {{dado.Servico|capfirst}} inf {{dado.Equipe|capfirst}}">
                <i class="fa fa-clipboard" aria-hidden="true"></i>
              </a>
            </td>
              <script>
                const clipboard = new ClipboardJS(".btn");
                clipboard.on("success", function (e) {});

                clipboard.on("error", function (e) {});
              </script>
            {% endif %}

            <!--  Filtro checked-->
            {% if dado.Executado %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" checked />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% else %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% endif %}
            <td>{{dado.created_by}}</td>
            <td>{{dado.last_edited_by}}</td>

            <!--  Filtro Detalhes-->
            {% comment %} <td>
              <a id="teste1" font size="2" class="text-decoration-none" href="{% url 'detalhe2' dado.id%}"> <img src="https://img.icons8.com/dusk/64/000000/redo.png" height="25" width="25" /></a>
            </td>

            <td>
              <a href="{% url 'excluir2' dado.id %}"> <img src="https://img.icons8.com/dusk/64/000000/delete-forever.png" height="25" width="25" /></a>
            </td> {% endcomment %}
          </tr>
        {% endfor %}   

          <!-- Query para o Grupo ADM GERAL -->
      {% else %} 
        {% for dado in filtro2.qs %}
          <tr>
            <td></td>
            <td>{{dado.Localidade}}</td>
            <td>
              {% if dado.Medir == 'Medir' %}
                <h2 style="color: Green">P/ Medir</h2>
              {% elif dado.Medir == 'Prioridade' %}
                <h2 style="color: red">Priorizar!</h2>
              {% else %}
                <h2 style="color: Grey">Normal</h2>
              {% endif %}
            </td>
            <td>{{dado.Ss}}</td>
            <td>{{dado.Data|date:"d/m/Y"}}</td>

            <td>{{ dado.atual3|safe }}</td>


            <td>{{dado.EquipeGestor|lower|capfirst}}</td>
            <td>{{dado.BairroGestor|lower|capfirst}}</td>
            <td>{{dado.Rua|lower|capfirst}}</td>
            <td>{{dado.Referencia|lower|capfirst}}</td>
            <td>{{dado.Servico|lower|capfirst}}</td>
            <td>{{dado.Observacao|lower|capfirst}}</td>

            <td>
              <a href="{% url 'editar2' dado.id %}">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </a>
            </td>

            <!--  Filtro Copiar informaçoes da tabela-->
            {% if dado.Copiar %}
            <td></td>
            {% else %}
            <td>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
              <a class="btn" data-clipboard-text="  Executar: {{dado.Servico|capfirst}} inf {{dado.Equipe|capfirst}}">
                <i class="fa fa-clipboard" aria-hidden="true"></i>
              </a>
            </td>
              <script>
                const clipboard = new ClipboardJS(".btn");
                clipboard.on("success", function (e) {});

                clipboard.on("error", function (e) {});
              </script>
            {% endif %}

            <!--  Filtro checked-->
            {% if dado.Executado %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" checked />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% else %}
            <td>
              <input disabled type="checkbox" class="form-check-input" id="flexSwitchCheckDefaultXl" />
              <label class="form-check-label" for="flexSwitchCheckDefaultXl"></label>
            </td>
            {% endif %}
            <td>{{dado.created_by}}</td> 
            <td>{{dado.last_edited_by}}</td>

            <!--  Filtro Detalhes-->
            {% comment %} <td>
              <a id="teste1" font size="2" class="text-decoration-none" href="{% url 'detalhe2' dado.id%}"> <img src="https://img.icons8.com/dusk/64/000000/redo.png" height="25" width="25" /></a>
            </td>

            <td>
              <a href="{% url 'excluir2' dado.id %}"> <img src="https://img.icons8.com/dusk/64/000000/delete-forever.png" height="25" width="25" /></a>
            </td> {% endcomment %}
          </tr>
        {% endfor %} 
      {% endif %}
      
    </tbody>
  </table>
</div>
{% endblock %} 

{% block scripts %}
<script>
  $(document).ready(function () {
    $("#tabela-listar").DataTable({
      dom: "Bfrtip",
      buttons: [
        {
          extend: "excelHtml5",
          text: '<i class="fa fa-download" aria-hidden="true"></i>',
          titleAttr: "Excel",
        },
        //"colvis", Botão para filtrar colunas
        //'print' , Botão de printar a tela
      ],

      
      
      stateSave: true,
      responsive: true,
 
      // "bSort": false,
      aaSorting: [],
      pageLength: 25,
      language: {
        emptyTable: "Nenhum registro encontrado",
        info: "Mostrando de _START_ até _END_ de _TOTAL_ registros",
        infoFiltered: "(Filtrados de _MAX_ registros)",
        infoThousands: ".",
        loadingRecords: "Carregando...",
        zeroRecords: "Nenhum registro encontrado",
        search: "Pesquisar",
        paginate: {
          next: "Próximo",
          previous: "Anterior",
          first: "Primeiro",
          last: "Último",
        },
        aria: {
          sortAscending: ": Ordenar colunas de forma ascendente",
          sortDescending: ": Ordenar colunas de forma descendente",
        },
        select: {
          rows: {
            _: "Selecionado %d linhas",
            1: "Selecionado 1 linha",
          },
          cells: {
            1: "1 célula selecionada",
            _: "%d células selecionadas",
          },
          columns: {
            1: "1 coluna selecionada",
            _: "%d colunas selecionadas",
          },
        },
        buttons: {
          copySuccess: {
            1: "Uma linha copiada com sucesso",
            _: "%d linhas copiadas com sucesso",
          },
          collection: 'Coleção  <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"><\/span>',
          colvis: "Filtrar",
          colvisRestore: "Restaurar Visibilidade",
          copy: "Copiar",
          copyKeys: "Pressione ctrl ou u2318 + C para copiar os dados da tabela para a área de transferência do sistema. Para cancelar, clique nesta mensagem ou pressione Esc..",
          copyTitle: "Copiar para a Área de Transferência",
          csv: "CSV",
          excel: "Excel",
          pageLength: {
            "-1": "Mostrar todos os registros",
            _: "Mostrar %d registros",
          },
          pdf: "PDF",
          print: "Imprimir",
          createState: "Criar estado",
          removeAllStates: "Remover todos os estados",
          removeState: "Remover",
          renameState: "Renomear",
          savedStates: "Estados salvos",
          stateRestore: "Estado %d",
          updateState: "Atualizar",
        },
        autoFill: {
          cancel: "Cancelar",
          fill: "Preencher todas as células com",
          fillHorizontal: "Preencher células horizontalmente",
          fillVertical: "Preencher células verticalmente",
        },
        lengthMenu: "Exibir _MENU_ resultados por página",
        searchBuilder: {
          add: "Adicionar Condição",
          button: {
            0: "Construtor de Pesquisa",
            _: "Construtor de Pesquisa (%d)",
          },
          clearAll: "Limpar Tudo",
          condition: "Condição",
          conditions: {
            date: {
              after: "Depois",
              before: "Antes",
              between: "Entre",
              empty: "Vazio",
              equals: "Igual",
              not: "Não",
              notBetween: "Não Entre",
              notEmpty: "Não Vazio",
            },
            number: {
              between: "Entre",
              empty: "Vazio",
              equals: "Igual",
              gt: "Maior Que",
              gte: "Maior ou Igual a",
              lt: "Menor Que",
              lte: "Menor ou Igual a",
              not: "Não",
              notBetween: "Não Entre",
              notEmpty: "Não Vazio",
            },
            string: {
              contains: "Contém",
              empty: "Vazio",
              endsWith: "Termina Com",
              equals: "Igual",
              not: "Não",
              notEmpty: "Não Vazio",
              startsWith: "Começa Com",
              notContains: "Não contém",
              notStartsWith: "Não começa com",
              notEndsWith: "Não termina com",
            },
            array: {
              contains: "Contém",
              empty: "Vazio",
              equals: "Igual à",
              not: "Não",
              notEmpty: "Não vazio",
              without: "Não possui",
            },
          },
          data: "Data",
          deleteTitle: "Excluir regra de filtragem",
          logicAnd: "E",
          logicOr: "Ou",
          title: {
            0: "Construtor de Pesquisa",
            _: "Construtor de Pesquisa (%d)",
          },
          value: "Valor",
          leftTitle: "Critérios Externos",
          rightTitle: "Critérios Internos",
        },
        searchPanes: {
          clearMessage: "Limpar Tudo",
          collapse: {
            0: "Painéis de Pesquisa",
            _: "Painéis de Pesquisa (%d)",
          },
          count: "{total}",
          countFiltered: "{shown} ({total})",
          emptyPanes: "Nenhum Painel de Pesquisa",
          loadMessage: "Carregando Painéis de Pesquisa...",
          title: "Filtros Ativos",
          showMessage: "Mostrar todos",
          collapseMessage: "Fechar todos",
        },
        thousands: ".",
        datetime: {
          previous: "Anterior",
          next: "Próximo",
          hours: "Hora",
          minutes: "Minuto",
          seconds: "Segundo",
          amPm: ["am", "pm"],
          unknown: "-",
          months: {
            0: "Janeiro",
            1: "Fevereiro",
            10: "Novembro",
            11: "Dezembro",
            2: "Março",
            3: "Abril",
            4: "Maio",
            5: "Junho",
            6: "Julho",
            7: "Agosto",
            8: "Setembro",
            9: "Outubro",
          },
          weekdays: ["Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira", "Quinte-feira", "Sexta-feira", "Sábado"],
        },
        editor: {
          close: "Fechar",
          create: {
            button: "Novo",
            submit: "Criar",
            title: "Criar novo registro",
          },
          edit: {
            button: "Editar",
            submit: "Atualizar",
            title: "Editar registro",
          },
          error: {
            system: 'Ocorreu um erro no sistema (<a target="\\" rel="nofollow" href="\\">Mais informações<\/a>).',
          },
          multi: {
            noMulti: "Essa entrada pode ser editada individualmente, mas não como parte do grupo",
            restore: "Desfazer alterações",
            title: "Multiplos valores",
            info: "Os itens selecionados contêm valores diferentes para esta entrada. Para editar e definir todos os itens para esta entrada com o mesmo valor, clique ou toque aqui, caso contrário, eles manterão seus valores individuais.",
          },
          remove: {
            button: "Remover",
            confirm: {
              _: "Tem certeza que quer deletar %d linhas?",
              1: "Tem certeza que quer deletar 1 linha?",
            },
            submit: "Remover",
            title: "Remover registro",
          },
        },
        decimal: ",",
        stateRestore: {
          creationModal: {
            button: "Criar",
            columns: {
              search: "Busca de colunas",
              visible: "Visibilidade da coluna",
            },
            name: "Nome:",
            order: "Ordernar",
            paging: "Paginação",
            scroller: "Posição da barra de rolagem",
            search: "Busca",
            searchBuilder: "Mecanismo de busca",
            select: "Selecionar",
            title: "Criar novo estado",
            toggleLabel: "Inclui:",
          },
          emptyStates: "Nenhum estado salvo",
          removeConfirm: "Confirma remover %s?",
          removeJoiner: "e",
          removeSubmit: "Remover",
          removeTitle: "Remover estado",
          renameButton: "Renomear",
          renameLabel: "Novo nome para %s:",
          renameTitle: "Renomear estado",
          duplicateError: "Já existe um estado com esse nome!",
          emptyError: "Não pode ser vazio!",
          removeError: "Falha ao remover estado!",
        },
        infoEmpty: "Mostrando 0 até 0 de 0 registro(s)",
        processing: "Carregando...",
        searchPlaceholder: "Buscar registros",
      },
    });
  });
</script>
{% endblock %}
